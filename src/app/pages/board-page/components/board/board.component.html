<div [class]="boundaryClassName" (contextmenu)="contextMenu($event)" #boardElement>
    <ng-container *ngIf="user$ | async; else notAuthed">
        <ng-container *ngIf="currentBoard$ | async; else loading">
            <ng-container *ngIf="tasks$ | async as tasks; else loading">
                <ng-container *ngFor="let task of tasks">
                    <tm-adaptive-drag [dragBoundaryClassName]="'.' + boundaryClassName"
                                      [initItemPosition]="initCardPosition"
                                      [boundaryResizes]="resizes$"
                                      (DnDEnd)="onDnD($event)"
                                      @smoothAppearance
                    >
                        <tm-card [task]="task"></tm-card>
                    </tm-adaptive-drag>
                </ng-container>
            </ng-container>
        </ng-container>
    </ng-container>
    <ng-template #notAuthed>

    </ng-template>

    <tm-adaptive-drag class="board__task-creator"
                      [dragBoundaryClassName]="'.' + boundaryClassName"
                      [initItemPosition]="initCreatorPosition"
                      [boundaryResizes]="resizes$"
                      (DnDEnd)="onDnD($event)"
    >
        <tm-task-creator></tm-task-creator>
    </tm-adaptive-drag>

    <ng-template #loading>
        <mat-spinner class="loader"></mat-spinner>
    </ng-template>
</div>

