<div [class]="boundaryClassName" (contextmenu)="contextMenu($event)" #board @smoothAppearance>
    <ng-container *ngIf="user$ | async; else notAuthed">
        <ng-container *ngIf="currentBoard$ | async; else loading">
            <ng-container *ngIf="tasks$ | async as tasks; else loading">
                <ng-container *ngFor="let task of tasks">
                    <tm-adaptive-drag [initItemPosition]="initCardPosition(task)"
                                      [boundary]="board"
                                      (newPosition)="taskCard.newTaskPosition($event)"
                    >
                        <tm-card [task]="task" #taskCard></tm-card>
                    </tm-adaptive-drag>
                </ng-container>
            </ng-container>
        </ng-container>
    </ng-container>
    <ng-template #notAuthed>

    </ng-template>

    <tm-adaptive-drag class="board__task-creator" [initItemPosition]="initCreatorPosition" [boundary]="board">
        <tm-task-creator></tm-task-creator>
    </tm-adaptive-drag>

    <ng-template #loading>
        <mat-spinner class="loader"></mat-spinner>
    </ng-template>
</div>

